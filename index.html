<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-01-27">

<title>CIDOC-CRM in RDF Application Profile</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-2ecafa609d29e6b5df2c2179b389d5c3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="codemirror.css">
<link rel="stylesheet" href="style.css">
<meta name="citation_title" content="CIDOC-CRM in RDF Application Profile">
<meta name="citation_author" content="Jakob Voß">
<meta name="citation_publication_date" content="2025-01-27">
<meta name="citation_cover_date" content="2025-01-27">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-01-27">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Implementing the CIDOC conceptual reference model in RDF;,citation_author=Martin Doerr;,citation_author=Richard Light;,citation_author=Gerald Hiebel;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_fulltext_html_url=https://cidoc-crm.org/sites/default/files/Implementing%20the%20CIDOC%20Conceptual%20Reference%20Model%20in%20RDF.pdf;">
<meta name="citation_reference" content="citation_title=Versions of the CIDOC-CRM;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_fulltext_html_url=https://cidoc-crm.org/versions-of-the-cidoc-crm;,citation_publisher=ICOM;">
<meta name="citation_reference" content="citation_title=Spatio-temporal reasoning in CIDOC CRM: An hybrid ontology with GeoSPARQL and OWL-time;,citation_author=Gilles-Antoine Nys;,citation_author=Muriel Ruymbeke;,citation_author=Roland Billen;,citation_editor=A. Belussi;,citation_editor=R. Billen;,citation_editor=P. Hallot;,citation_editor=S. Migliorini;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_fulltext_html_url=https://ceur-ws.org/Vol-2230/paper_04.pdf;,citation_volume=2230;,citation_conference_title=2nd workshop on computing techniques for spatio-temporal data in archaeology and cultural heritage;,citation_series_title=CEUR;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">CIDOC-CRM in RDF Application Profile</h1>
            <p class="subtitle lead">Guidelines how to use CIDOC-CRM in RDF for interoperability</p>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Author</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Jakob Voß <a href="https://orcid.org/0000-0002-7613-4123" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Verbundzentrale des GBV (VZG)
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">January 27, 2025</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    <div class="quarto-code-links"><div class="quarto-title-meta-heading">Code Links</div><div class="quarto-title-meta-contents"><span style="padding-right: 0.5em;"><a href="https://github.com/nfdi4objects/crm-rdf-ap/" target="_blank"><i class="bi bi-github"></i>GitHub Repo</a>,</span><span><a href="https://github.com/nfdi4objects/crm-rdf-ap/issues"><i class="bi bi-link-45deg"></i>GitHub Issues</a></span></div></div></div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#background-and-motivation" id="toc-background-and-motivation" class="nav-link" data-scroll-target="#background-and-motivation"><span class="header-section-number">1.1</span> Background and Motivation</a></li>
  <li><a href="#difficulties-in-expressing-crm-and-rdf" id="toc-difficulties-in-expressing-crm-and-rdf" class="nav-link" data-scroll-target="#difficulties-in-expressing-crm-and-rdf"><span class="header-section-number">1.2</span> Difficulties in expressing CRM and RDF</a></li>
  <li><a href="#about-this-document" id="toc-about-this-document" class="nav-link" data-scroll-target="#about-this-document"><span class="header-section-number">1.3</span> About this document</a></li>
  </ul></li>
  <li><a href="#primitive-values" id="toc-primitive-values" class="nav-link" data-scroll-target="#primitive-values"><span class="header-section-number">2</span> Primitive values</a>
  <ul class="collapse">
  <li><a href="#temporal-data" id="toc-temporal-data" class="nav-link" data-scroll-target="#temporal-data"><span class="header-section-number">2.1</span> Temporal data</a></li>
  <li><a href="#geographic-data" id="toc-geographic-data" class="nav-link" data-scroll-target="#geographic-data"><span class="header-section-number">2.2</span> Geographic data</a></li>
  </ul></li>
  <li><a href="#authority-files-and-types" id="toc-authority-files-and-types" class="nav-link" data-scroll-target="#authority-files-and-types"><span class="header-section-number">3</span> Authority files and types</a></li>
  <li><a href="#crm-classes-to-use-with-caution" id="toc-crm-classes-to-use-with-caution" class="nav-link" data-scroll-target="#crm-classes-to-use-with-caution"><span class="header-section-number">4</span> CRM Classes to use with caution</a>
  <ul class="collapse">
  <li><a href="#e58-measurement-unit" id="toc-e58-measurement-unit" class="nav-link" data-scroll-target="#e58-measurement-unit"><span class="header-section-number">4.1</span> E58 Measurement Unit</a></li>
  <li><a href="#e41-appellation" id="toc-e41-appellation" class="nav-link" data-scroll-target="#e41-appellation"><span class="header-section-number">4.2</span> E41 Appellation</a></li>
  </ul></li>
  <li><a href="#deprecated-crm-classes" id="toc-deprecated-crm-classes" class="nav-link" data-scroll-target="#deprecated-crm-classes"><span class="header-section-number">5</span> Deprecated CRM classes</a></li>
  <li><a href="#differences-to-the-official-encoding-of-crm-in-rdf" id="toc-differences-to-the-official-encoding-of-crm-in-rdf" class="nav-link" data-scroll-target="#differences-to-the-official-encoding-of-crm-in-rdf"><span class="header-section-number">6</span> Differences to the official encoding of CRM in RDF</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">7</span> References</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">
<script src="./js/codemirror.js"></script>
<script src="./js/sparql.js"></script>
<script src="./js/turtle.js"></script>
<script src="./js/runmode.js"></script>
<script src="./js/highlight.js"></script>



  


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<section id="background-and-motivation" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="background-and-motivation"><span class="header-section-number">1.1</span> Background and Motivation</h2>
<p>The <a href="https://www.cidoc-crm.org/">CIDOC Conceptual Reference Model (CRM)</a> is a conceptual data model used in the cultural heritage domain. The <a href="https://www.w3.org/TR/rdf11-concepts/">Resource Description Framework (RDF)</a> is a graph-based data format. Both CRM and RDF have been created independently for integration of information. RDF is a good fit to express CRM in data and it has been used to do so. The expression of CRM in RDF is not trivial though, so some guidelines are needed. This document is going to provide an application profile to best use CRM in RDF for integration with other RDF data within NFDI4Objects. The document is going to be compared and aligned with similar recommendations such as <span class="citation" data-cites="Doerr2020">Doerr, Light, and Hiebel (<a href="#ref-Doerr2020" role="doc-biblioref">2020</a>)</span>.</p>
</section>
<section id="difficulties-in-expressing-crm-and-rdf" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="difficulties-in-expressing-crm-and-rdf"><span class="header-section-number">1.2</span> Difficulties in expressing CRM and RDF</h2>
<p>CRM defines abstract types of entities (CRM classes) such as events, measurements, places, and actors with relationship types (CRM properties) to connect instances of these entity types. RDF and its most common extensions define how to identify entities (resources), entity types (RDF classes) and relationship types (CRM properties) with URIs and values with Unicode strings (RDF literals) optionally having a language or a data type to encode values such as numbers and dates. RDF is used with ontologies that define RDF classes, properties, and constraints. CRM looks like an ontology or like it could directly be mapped to an RDF ontology, but this is not the case. CRM is agnostic to data formats: CRM classes are not RDF classes and CRM has no concept of data types and values, so any expression of CRM in RDF comes with choices of design. It is possible to express the same information modeled with CRM in different forms of RDF, so data cannot be integrated flawlessly.</p>
</section>
<section id="about-this-document" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="about-this-document"><span class="header-section-number">1.3</span> About this document</h2>
<p>The document is managed in a git repository at <a href="https://github.com/nfdi4objects/crm-rdf-ap" class="uri">https://github.com/nfdi4objects/crm-rdf-ap</a>. Contributions and feedback is very welcome!</p>
</section>
</section>
<section id="primitive-values" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Primitive values</h1>
<p><a href="http://www.cidoc-crm.org/cidoc-crm/E59">E59 Primitive Value</a> and its subclasses are not expressed as RDF classes. Instead</p>
<ul>
<li><p>instances of <a href="http://www.cidoc-crm.org/cidoc-crm/E62">E62 String</a> are expressed as RDF literals with optional language tag, and</p></li>
<li><p>instances of <a href="http://www.cidoc-crm.org/cidoc-crm/E60">E60 Number</a> are expressed as RDF literals with numeric data type such as <code>xsd:integer</code></p></li>
</ul>
<p>The CRM classes <a href="http://www.cidoc-crm.org/cidoc-crm/E61">E61 Time Primitive</a>, <a href="http://www.cidoc-crm.org/cidoc-crm/E94">E94 Space Primitive</a>, and <a href="http://www.cidoc-crm.org/cidoc-crm/E95">E95 Spacetime Primitive</a> are both subclasses of <a href="http://www.cidoc-crm.org/cidoc-crm/E59">E59 Primitive Value</a> and of <a href="http://www.cidoc-crm.org/cidoc-crm/E41">E41 Appellation</a>, so <a href="#e41-appelation">the latter</a> can be used when a mapping to established RDF data types is not applicable.</p>
<section id="temporal-data" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="temporal-data"><span class="header-section-number">2.1</span> Temporal data</h2>
<p>Instances of <a href="http://www.cidoc-crm.org/cidoc-crm/E61">E61 Time Primitive</a> and <a href="http://www.cidoc-crm.org/cidoc-crm/E52">E52 Time-Span</a> SHOULD be expressed as RDF literals with one of the following data types or as instance of [TemporalEntity] or its subclasses from <a href="https://www.w3.org/TR/owl-time/">Time Ontology</a>. :</p>
<ul>
<li><code>xsd:date</code></li>
<li><code>xsd:time</code></li>
<li><code>xsd:dateTime</code></li>
<li><code>xsd:dateTimeStamp</code></li>
<li><code>xsd:gDay</code></li>
<li><code>xsd:gMonthDay</code></li>
<li><code>xsd:gMonth</code></li>
<li><code>xsd:gYear</code></li>
<li><code>xsd:gYearMonth</code></li>
<li><code>edtf:EDTF</code> for more complex values, such as intervals or uncertain dates, in <a href="https://www.loc.gov/standards/datetime/">EDTF</a> syntax
<ul>
<li><code>edtf:EDTF-level0</code></li>
<li><code>edtf:EDTF-level1</code></li>
<li><code>edtf:EDTF-level2</code></li>
</ul></li>
</ul>
<pre id="lst-temporal-primitives" class="ttl"><code>@prefix edtf: &lt;http://id.loc.gov/datatypes/edtf/&gt;
@prefix unit: &lt;http://qudt.org/vocab/unit/&gt; .

&lt;TitanticSinking&gt; a crm:E81_Transformation ;
  crm:P124_transformed &lt;RMSTitanic&gt; ;
  crm:P123_resulted_in &lt;TitanticWreck&gt; .
  crm:P4_has_time-span 
    "1912-04-15"^^xsd:date ,                        # date only
    "1912-04-15T02:38–05:18Z"^^xsd:dateTimeStamp ,  # precise date and time with timezone
    "1912-04-15"^^edtf:EDTF .                       # imprecise date with EDTF</code></pre>
<p>Support of simple temporal data is included in most SPARQL processors although it is not part of the SPARQL 1.2 specification (see <a href="https://github.com/w3c/sparql-dev/blob/main/SEP/SEP-0002/sep-0002.md">proposal SEP-0002</a>).</p>
<p>More complex temoral data can be expressed with the <a href="https://www.w3.org/TR/owl-time/">Time Ontology</a> as discussed by <span class="citation" data-cites="Nys2018">Nys, Ruymbeke, and Billen (<a href="#ref-Nys2018" role="doc-biblioref">2018</a>)</span>. EDTF can be mapped to Time Ontology via <a href="https://periodo.github.io/edtf-ontology/">EDTF in RDF</a></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="citation" data-cites="Doerr2020">Doerr, Light, and Hiebel (<a href="#ref-Doerr2020" role="doc-biblioref">2020</a>)</span> recommended to use additional properties for temporal intervals (<a href="http://www.cidoc-crm.org/cidoc-crm/E52">E52 Time-Span</a>):</p>
<ul>
<li><code>P81a_end_of_the_begin</code> together with <code>P81b_begin_of_the_end</code> instead of <a href="http://www.cidoc-crm.org/cidoc-crm/P81">P81 ongoing throughout</a></li>
<li><code>P82a_begin_of_the_begin</code> together with <code>P82b_end_of_the_end</code> instead of <a href="http://www.cidoc-crm.org/cidoc-crm/P82">P82 at some time within</a></li>
</ul>
<p>The use of these properties may lead to false assumption of precision and it introduced a solitary solution to a problem also addressed outside of CIDOC. For this reasons these additional properties should <em>not</em> be used in favour of EDTF and/or Time Ontology.</p>
</div>
</div>
<p>An example:</p>
<pre class="ttl"><code>&lt;WW1&gt; a crm:E52_Time-Span , time:TemporalEntity .
  edtfo:hasEDTFDateTimeDescription "1914/1918" ;
  time:hasBeginning [ time:inXSDgYear "1914"^^xsd:gYear ] ;
  time:hasEnd [ time:inXSDgYear "1918"^^xsd:gYear ] .</code></pre>
<p>Temporal CRM properties such as <a href="http://www.cidoc-crm.org/cidoc-crm/P86">P86 falls within</a> should also be replaced by corresponding properties from Time Ontology such as <a href="https://www.w3.org/TR/owl-time/#time:intervalIn">intervalIn</a>.</p>
</section>
<section id="geographic-data" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="geographic-data"><span class="header-section-number">2.2</span> Geographic data</h2>
<p>Instances of <strong><a href="http://www.cidoc-crm.org/cidoc-crm/E94">E94 Space Primitive</a></strong> should be expressed using <a href="https://www.ogc.org/de/publications/standard/geosparql/">GeoSPARQL</a> Ontology as instance of <code>geo:hasGeometry</code>, compatible with various geographic data formats (WKT, GeoJSON, GML…).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> CRM Property <a href="http://www.cidoc-crm.org/cidoc-crm/P168">P168 place is defined by</a> should be expressed with RDF property <code>geo:hasGeometry</code>. CRM Properties <a href="http://www.cidoc-crm.org/cidoc-crm/P171">P171 at some place within</a>, and <a href="http://www.cidoc-crm.org/cidoc-crm/P172">P172 contains</a> can be used as RDF properties to link places (<a href="http://www.cidoc-crm.org/cidoc-crm/E53">E53 Place</a>) to outer and inner geometries but <code>geo:hasBoundingBox</code> and <code>geo:hasCentroid</code> should be preferred, if applicable.</p>
<pre class="ttl"><code>&lt;TitanticWreckLocation&gt; a crm:E53_Place ;
  crm:P89_falls_within &lt;AtlanticOcean&gt; ;
  geo:hasGeometry [ a geo:Geometry ;
    geo:asGeoJSON '{"type": "Point","coordinates": [-49.946944,41.7325,-3803]}' ;
    geo:asWKT "POINT (-49.946944 41.7325 -3803)" ;
  ] .</code></pre>
<p>GeoSPARQL properties <code>geo:hasMetricSpatialResolution</code> and/or <code>geo:hasSpatialAccuracy</code> can be used to indicate level of detail.</p>
<p>Instances of <a href="http://www.cidoc-crm.org/cidoc-crm/E95">E95 Spacetime Primitive</a> … (TODO)</p>
</section>
</section>
<section id="authority-files-and-types" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Authority files and types</h1>
<p>CRM class <strong><a href="http://www.cidoc-crm.org/cidoc-crm/E32">E32 Authority Document</a></strong> and CRM property <strong><a href="http://www.cidoc-crm.org/cidoc-crm/P71">P71 lists</a></strong> MUST NOT be used in RDF but corresponding SKOS RDF classes <a href="https://www.w3.org/TR/skos-reference/#schemes">ConceptScheme</a> and <a href="https://www.w3.org/TR/skos-reference/#schemes">inScheme</a> instead.</p>
<p>CRM also defines class <strong><a href="http://www.cidoc-crm.org/cidoc-crm/E55">E55 Type</a></strong> with properties <strong><a href="http://www.cidoc-crm.org/cidoc-crm/P127">P127 has broader term</a></strong> and <strong><a href="http://www.cidoc-crm.org/cidoc-crm/P127i_has_narrower_term">P127i has narrower term</a></strong>. The class MUST NOT be used in RDF. Instead it can be mapped to one of:</p>
<ul>
<li><code>skos:Concept</code> and <code>skos:broader</code>/<code>skos:narrower</code>, or to</li>
<li>individual RDF classes, connected with <code>rdfs:subClassOf</code>, or</li>
<li>a more specific sublass or more generic superclass of <a href="http://www.cidoc-crm.org/cidoc-crm/E55">E55 Type</a>, such as <a href="http://www.cidoc-crm.org/cidoc-crm/E56">E56 Language</a> and <a href="http://www.cidoc-crm.org/cidoc-crm/E28">E28 Conceptual Object</a>.</li>
</ul>
<p>Applications MAY define <a href="https://www.w3.org/TR/skos-reference/#schemes">ConceptScheme</a> as subclass of <a href="http://www.cidoc-crm.org/cidoc-crm/E31">E31 Document</a>, <a href="https://www.w3.org/TR/skos-reference/#concepts">Concept</a> a subclass of [E27 Conceptual Object] and <a href="https://www.w3.org/TR/skos-reference/#schemes">inScheme</a> as subproperty of <a href="http://www.cidoc-crm.org/cidoc-crm/P67">P67 refers to</a>.</p>
</section>
<section id="crm-classes-to-use-with-caution" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> CRM Classes to use with caution</h1>
<section id="e58-measurement-unit" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="e58-measurement-unit"><span class="header-section-number">4.1</span> E58 Measurement Unit</h2>
<p>Defintion of instances of <a href="http://www.cidoc-crm.org/cidoc-crm/E58">E58 Measurement Unit</a> should be avoided but either taken from an established vocabulary of units such as QUDT or expressed as RDF value with UCUM datatype.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<pre class="ttl"><code>@prefix unit: &lt;http://qudt.org/vocab/unit/&gt; .
@prefix cdt: &lt;https://w3id.org/cdt/&gt; .

&lt;TitanticSinking&gt;
  crm:P191_had_duration [ a crm:E54_Dimension ;
    crm:P90_has_value 160 ; crm:P91_has_unit unit:MIN ;   # value and QUDT unit
    rdf:value "7 min"^^cdt:ucum                           # UCUM string
  ] .</code></pre>
</section>
<section id="e41-appellation" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="e41-appellation"><span class="header-section-number">4.2</span> E41 Appellation</h2>
<p><strong><a href="http://www.cidoc-crm.org/cidoc-crm/E41">E41 Appellation</a></strong> and its subclasses (<a href="http://www.cidoc-crm.org/cidoc-crm/E35">E35 Title</a> and <a href="http://www.cidoc-crm.org/cidoc-crm/E42">E42 Identifier</a>) should be avoided (see <a href="#primitive-values">above</a> for additional subclasses <a href="http://www.cidoc-crm.org/cidoc-crm/E61">E61 Time Primitive</a>, <a href="http://www.cidoc-crm.org/cidoc-crm/E94">E94 Space Primitive</a>, and <a href="http://www.cidoc-crm.org/cidoc-crm/E94">E94 Space Primitive</a>), unless a name cannot uniquely be identified with a sequence of Unicode characters and an optional language tag:</p>
<pre class="ttl"><code>&lt;RMSTitantic&gt;
  crm:P102_has_title "RMS Titanic"@en ;
  crm:P1_is_identified_by [
    rdfs:value "MGY" ; 
    crm:P2_has_type &lt;http://www.wikidata.org/entity/Q353659&gt; # call sign
  ] .</code></pre>
<p>If there are multiple names with one preferred name per language and optional name alias, use <code>skos:prefLabel</code> and <code>skos:altLabel</code>:</p>
<pre class="ttl"><code>&lt;RMSTitantic&gt;
  skos:prefLabel "RMS Titanic"@en ;
  skos:altLabel "Titanic"@en, "Royal Mail Steamship Titanic"@en .</code></pre>
<p>The RDF property <code>skos:prefLabel</code> should not be confused with [P48 has preferred identifier] to be used for identifiers only.</p>
<p>If information about the act of naming is required, use <a href="http://www.cidoc-crm.org/cidoc-crm/E13">E13 Attribute Assignment</a> for simple appelations or <a href="http://www.cidoc-crm.org/cidoc-crm/E15">E15 Identifier Assignment</a> for identifiers.</p>
<p>If an identifier <strong><a href="http://www.cidoc-crm.org/cidoc-crm/E42">E42 Identifier</a> is an URI</strong> meant to identify an RDF resource, dont use plain strings but resource URIs in RDF. If a resource happens to have multiple equivalent URIs, choose a preferred URI and use <code>owl:sameAs</code> to record aliases:</p>
<pre class="ttl"><code>  &lt;RMSTitantic&gt; a crm:E18_Physical Thing ;
  owl:sameAs
    &lt;http://www.wikidata.org/entity/Q3018259&gt; ,
    &lt;http://kbpedia.org/kko/rc/RMS-Titanic-TheShip&gt; .</code></pre>
<p>instead of</p>
<pre class="ttl"><code>&lt;RMSTitanic&gt; a crm:E18_Physical Thing .
  crm:P1_is_identified_by
    [ a crm:E42_Identifier ;
      crm:P190_has_symbolic_content "http://www.wikidata.org/entity/Q3018259" ] ,
    [ a crm:E42_Identifier ;
      crm:P190_has_symbolic_content "http://kbpedia.org/kko/rc/RMS-Titanic-TheShip" ] .</code></pre>
</section>
</section>
<section id="deprecated-crm-classes" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Deprecated CRM classes</h1>
<p>CRM is constantly evolving, so some CRM classes have been renamed or replaced. Outdated classes and properties MUST be supported nevertheless to integrate data that has already been published.</p>
<p>See <span class="citation" data-cites="CRMResources"><span>“Versions of the CIDOC-CRM”</span> (<a href="#ref-CRMResources" role="doc-biblioref">2025</a>)</span> for a list of CRM versions.</p>
</section>
<section id="differences-to-the-official-encoding-of-crm-in-rdf" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Differences to the official encoding of CRM in RDF</h1>
<p>An official encoding of CRM in RDF is published since version 7.1.2, managed at <a href="https://gitlab.isl.ics.forth.gr/cidoc-crm/cidoc_crm_rdf/" class="uri">https://gitlab.isl.ics.forth.gr/cidoc-crm/cidoc_crm_rdf/</a> (<span class="citation" data-cites="Doerr2020">Doerr, Light, and Hiebel (<a href="#ref-Doerr2020" role="doc-biblioref">2020</a>)</span>). The encoding of CRM in RDF described in this document differes by introduction of SKOS:</p>
<ul>
<li><p><a href="http://www.cidoc-crm.org/cidoc-crm/E55">E55 Type</a> has been replaced by <a href="https://www.w3.org/TR/skos-reference/#concepts">Concept</a> and the latter is defined subclass of <a href="http://www.cidoc-crm.org/cidoc-crm/E28">E28 Conceptual Object</a> (instead of defining <a href="https://www.w3.org/TR/skos-reference/#concepts">Concept</a> a subclass of <a href="http://www.cidoc-crm.org/cidoc-crm/E55">E55 Type</a>).</p></li>
<li><p><a href="http://www.cidoc-crm.org/cidoc-crm/E32">E32 Authority Document</a> has been replaced by <a href="https://www.w3.org/TR/skos-reference/#schemes">ConceptScheme</a> and the latter is defined subclass of <a href="http://www.cidoc-crm.org/cidoc-crm/E31">E31 Document</a></p></li>
<li><p><a href="http://www.cidoc-crm.org/cidoc-crm/P71">P71 lists</a> has been replaced by <a href="https://www.w3.org/TR/skos-reference/#schemes">inScheme</a> and the latter is defined subproperty of <a href="http://www.cidoc-crm.org/cidoc-crm/P67">P67 refers to</a>.</p></li>
<li><p><a href="http://cidoc-crm.org/cidoc-crm/P127_has_broader_term">P172 has broader term</a> has been replaced by <a href="https://www.w3.org/TR/skos-reference/#semantic-relations">broader</a> (instead of defining the former superproperty of the latter)</p></li>
<li><p><a href="http://cidoc-crm.org/cidoc-crm/P127_has_broader_term">P172i has narrower term</a> has been replaced by <a href="https://www.w3.org/TR/skos-reference/#semantic-relations">narrower</a> (instead of defining the former superproperty of the latter)</p></li>
</ul>
<p>In addition the use of non-standard temporal properties such as <code>P81a_end_of_the_begin</code> and <code>P82b_end_of_the_end</code> will likely be discouraged in favour of <a href="https://www.w3.org/TR/owl-time/">Time Ontology</a> and <a href="https://www.loc.gov/standards/datetime/">EDTF</a>.</p>
<p>Rationales: integration with terminologies and simplification of queries.</p>
</section>
<section id="references" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> References</h1>
<!-- TODO: add SKOS -->
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Doerr2020" class="csl-entry" role="listitem">
Doerr, Martin, Richard Light, and Gerald Hiebel. 2020. <span>“Implementing the CIDOC Conceptual Reference Model in RDF.”</span> <a href="https://cidoc-crm.org/sites/default/files/Implementing%20the%20CIDOC%20Conceptual%20Reference%20Model%20in%20RDF.pdf">https://cidoc-crm.org/sites/default/files/Implementing%20the%20CIDOC%20Conceptual%20Reference%20Model%20in%20RDF.pdf</a>.
</div>
<div id="ref-Nys2018" class="csl-entry" role="listitem">
Nys, Gilles-Antoine, Muriel van Ruymbeke, and Roland Billen. 2018. <span>“Spatio-Temporal Reasoning in CIDOC CRM: An Hybrid Ontology with GeoSPARQL and OWL-Time.”</span> In <em>2nd Workshop on Computing Techniques for Spatio-Temporal Data in Archaeology and Cultural Heritage</em>, edited by A. Belussi, R. Billen, P. Hallot, and S. Migliorini. Vol. 2230. CEUR. <a href="https://ceur-ws.org/Vol-2230/paper_04.pdf">https://ceur-ws.org/Vol-2230/paper_04.pdf</a>.
</div>
<div id="ref-CRMResources" class="csl-entry" role="listitem">
<span>“Versions of the CIDOC-CRM.”</span> 2025. ICOM. <a href="https://cidoc-crm.org/versions-of-the-cidoc-crm">https://cidoc-crm.org/versions-of-the-cidoc-crm</a>.
</div>
</div>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>See also CRM Geo draft at <a href="http://www.cidoc-crm.org/extensions/crmgeo/" class="uri">http://www.cidoc-crm.org/extensions/crmgeo/</a>, defining superclasses of <code>geo:Geometry</code>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>See <a href="https://ci.mines-stetienne.fr/lindt/v4/custom_datatypes#ucum">cdt:ucum</a> and <a href="https://qudt.org/">QUDT</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>